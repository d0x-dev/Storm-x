
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ùë¥ùë´ ùë™ùë™ ùë™ùëØùë¨ùë™ùë≤ùë¨ùëπ</title>
  <link rel="icon" type="image/png" href="../assets/branding/md_cc_chk-mark.png">
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-icons-font@v7/font/simple-icons.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paymentfont/1.2.5/css/paymentfont.min.css">

  <style>
    html, body { height: 100%; font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial; }
    body { overflow: hidden; background: #020617; color: #e2e8f0; }

    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,0.04); }
    .card  { border-radius: 1rem; padding: 1rem; box-shadow: 0 10px 25px rgba(0,0,0,.25); border: 1px solid rgba(255,255,255,.08); }

    .mainGrid { height: 100vh; }
    .scrollCenter { height: 100vh; overflow-y: auto; -webkit-overflow-scrolling: touch; }

    /* Hide scrollbars globally but keep scrolling */
    .no-scrollbar { overflow-y: auto; -webkit-overflow-scrolling: touch; -ms-overflow-style: none; scrollbar-width: none; }
    .no-scrollbar::-webkit-scrollbar { width: 0 !important; height: 0 !important; display: none !important; background: transparent !important; }
    .no-scrollbar::-webkit-scrollbar-thumb { background: transparent !important; }

    /* Mobile dock (fixed bottom) */
    .mobile-dock {
      position: fixed; left: 0; right: 0; bottom: 0; z-index: 50;
      padding: 10px 14px calc(10px + env(safe-area-inset-bottom));
      background: rgba(15, 23, 42, .82);
      backdrop-filter: blur(18px) saturate(140%);
      border-top: 1px solid rgba(255,255,255,.08);
      box-shadow: 0 -8px 24px rgba(0,0,0,.35);
    }
    .dock-btn { flex: 1 1 0; display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 8px 6px; border-radius: 14px; color: #cbd5e1; }
    .dock-btn:hover { background: rgba(255,255,255,.06); }
    .dock-icon { width: 22px; height: 22px; opacity: .95; }

    /* Mobile slide menu */
    #mSide { transform: translateX(-100%); transition: transform .28s ease; }
    #mSide.open { transform: translateX(0%); }
    #mOverlay { opacity: 0; transition: opacity .2s ease; }
    #mOverlay.show { opacity: .55; }

    /* --- Global Statistics styles --- */
    .gs-panel{
      border-radius:16px; padding:16px 16px 18px;
      background: radial-gradient(1200px 600px at -20% -40%, rgba(59,130,246,.10), transparent 60%),
                  radial-gradient(1200px 600px at 120% -40%, rgba(16,185,129,.10), transparent 60%),
                  rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 12px 24px rgba(0,0,0,.25);
    }
    
    /* ===== HARD GLOBAL SCROLLBAR HIDE ===== */
    html, body, .scrollCenter, aside, .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    html::-webkit-scrollbar, body::-webkit-scrollbar, .scrollCenter::-webkit-scrollbar, aside::-webkit-scrollbar, .no-scrollbar::-webkit-scrollbar { display: none !important; }
    
    /* Additional Styles from checkers.html */
    :root{ --bg:#0b1220; --card:#0f172a; --border:rgba(255,255,255,.10); --muted:#94a3b8; --text:#e5e7eb; --accent1:#22c55e; --accent2:#60a5fa; --ring:#10b981; }
    .btn-primary { background: linear-gradient(90deg, var(--accent1) 0%, var(--accent2) 100%); color:#04121b; font-weight:700; transition: transform .15s ease, box-shadow .2s ease; }
    .btn-primary:hover{ transform: translateY(-1px); box-shadow: 0 8px 24px rgba(16,185,129,.25); }
    .btn-muted { background:#111827; border:1px solid var(--border); color:#e5e7eb; }
    .btn-muted:hover{ background:#1f2937; }
    .section-title{ font-family: "Inter", sans-serif; letter-spacing:.2px; background: linear-gradient(90deg,#e5e7eb 0%,#8abef8 60%,#34d399 100%); -webkit-background-clip:text; background-clip:text; color:transparent; }
    .select-container select, .input-like, textarea, input[type="text"]{ appearance: none; border:1px solid var(--border); background:#0b1730; color:var(--text); border-radius:12px; padding:.7rem .9rem; font-size:.92rem; outline:none; transition: border-color .2s ease, box-shadow .2s ease, background .2s ease; }
    .select-container select:focus, .input-like:focus, textarea:focus, input[type="text"]:focus{ border-color: rgba(16,185,129,.6); box-shadow: 0 0 0 4px rgba(16,185,129,.12); }
    
    .profile-pic { width: 56px; height: 56px; border-radius:9999px; object-fit:cover; border:2px solid rgba(255,255,255,.18); }
    .avatar-ring { padding: 2px; border-radius: 9999px; background: linear-gradient(135deg, rgba(16,185,129,.6), rgba(59,130,246,.6)); display:inline-block; }
    .name { font-weight: 700; }
    .badge { padding:.18rem .45rem; border-radius:7px; font-size:.7rem; background: rgba(255,255,255,.08); border:1px solid var(--border); }
    
    pre.result{ background: #0d152b; border:1px dashed rgba(148,163,184,.25); border-radius: 12px; padding: 14px 14px; line-height: 1.4; white-space: pre-wrap; word-break: break-word; overflow-wrap: anywhere; max-height: 400px; overflow-y: auto; scrollbar-width: thin; }
    .line-ok { border-left:3px solid #f59e0b; padding-left:.55rem; }
    .line-live { border-left:3px solid #34d399; padding-left:.55rem; }
    .line-dead { border-left:3px solid #ef4444; padding-left:.55rem; }
    
    #mainRoot.blur-mode #cardList, #mainRoot.blur-mode input[type="text"], #mainRoot.blur-mode textarea, #mainRoot.blur-mode .cc-mask { filter: blur(7px); }
    
    .tools-backdrop { position: fixed; inset: 0; background: rgba(2,6,23,.55); backdrop-filter: blur(2px); display:none; }
    .tools-backdrop.active { display:block; }
    .tools-drawer { position: fixed; right: -440px; top: 0; height: 100vh; width: 440px; max-width: 100vw; background: linear-gradient(180deg,#0b1220,#0c1628); border-left: 1px solid var(--border); transition: right .25s ease; z-index: 60; overflow-y: auto; }
    .tools-drawer.open { right: 0; }
    
    .select-container select, #proxySelect{ background:#0b1730 !important; color:#e5e7eb !important; border:1px solid rgba(255,255,255,.12) !important; color-scheme: dark; }
    #proxySelect option{ background:#0b1730; color:#e5e7eb; }
    
    #progressWrap{ margin-top:12px; height:14px; border-radius:10px; background:#0e1730; border:1px solid rgba(255,255,255,.10); position:relative; overflow:hidden;}
    #progressBar{ position:absolute; inset:0; width:0%; background:linear-gradient(90deg,#22c55e,#60a5fa); }
    #progressText{ margin-top:8px; font-size:.85rem; color:#94a3b8; }
    
    .api-pill{ display:inline-flex; align-items:center; gap:.4rem; font-size:.78rem; padding:.25rem .5rem; border-radius:.5rem; border:1px solid rgba(255,255,255,.12); }
    .api-pill.ok{ color:#22c55e; background:rgba(34,197,94,.12); }
    .api-pill.down{ color:#f87171; background:rgba(248,113,113,.12); }

    /* Modal Styles */
    #cfgModal .sheet{ width:100%; max-width:720px; max-height: 90vh; display: flex; flex-direction: column; }
    .stepper{ display:flex; gap:.5rem; margin-bottom:1rem }
    .step{ flex:1; text-align:center; font-size:.85rem; padding:.55rem .4rem; border-radius:.6rem; border:1px solid rgba(255,255,255,.10); background:#0e1730; color:#cbd5e1; }
    .step.on{ background:linear-gradient(90deg,#22c55e33,#60a5fa33); border-color:rgba(16,185,129,.35); color:#e5e7eb; font-weight:600; }
    #cfgModal .fsel-list { max-height: 50vh; overflow-y: auto; scrollbar-width: thin; }
    #cfgModal .sheet > div:last-child { position: sticky; bottom: 0; background: linear-gradient(180deg, rgba(15,23,42,.95), rgba(11,18,32,.95)); padding: 1rem 1.25rem; border-top: 1px solid rgba(255,255,255,.1); margin-top: auto; }
    
    .fsel-item{ display:flex; align-items:center; justify-content:space-between; padding:.85rem 1rem; border-radius:12px; background:#0d152b; border:1px solid rgba(255,255,255,.10); transition:transform .12s ease, border-color .12s ease, background .12s ease; }
    .fsel-item:hover{ transform: translateY(-1px); border-color: rgba(34,197,94,.35); background:#0f1936; }
    .fsel-left{ display:flex; gap:.8rem; align-items:center; }
    .fsel-ico{ width:28px; height:28px; display:grid; place-items:center; border-radius:8px; background:rgba(148,163,184,.12); font-size:16px; }
    .fsel-title{ font-weight:600; }
    .fsel-sub{ font-size:.82rem; color:#9fb3c8; margin-top:.1rem }
    .fsel-right{ display:flex; gap:.5rem; align-items:center; }
    .badge-s{ font-size:.70rem; padding:.12rem .4rem; border-radius:.4rem; border:1px solid rgba(255,255,255,.12); }
    .badge-ok{ color:#22c55e; background:rgba(34,197,94,.12); }
    .badge-down{ color:#f87171; background:rgba(248,113,113,.12); }
    .fsel-item.active{ outline:2px solid rgba(34,197,94,.35); }
  </style>
</head>
<body id="mainRoot" class="bg-slate-950 text-slate-100">

<!-- MOBILE DOCK -->
<nav class="mobile-dock lg:hidden">
  <div class="flex items-center justify-center">
    <button id="dockMenu" class="dock-btn" aria-label="Menu">
      <svg class="dock-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z" />
      </svg>
    </button>
  </div>
</nav>

<!-- MOBILE OVERLAY (for sidebar) -->
<div id="mOverlay" class="fixed inset-0 bg-black hidden z-40"></div>

<div class="mainGrid grid grid-cols-1 lg:grid-cols-[260px_1fr]">

  <!-- LEFT sidebar (desktop) -->
  <aside class="hidden lg:flex flex-col border-r border-white/10 bg-slate-900/60 sticky top-0 h-screen">
    <a href="./settings.php" class="p-4 flex items-center gap-3 hover:bg-white/5 transition">
      <img
        src="https://t.me/i/userpic/320/3kPKhmaQ6Jn-fbZz_b-hZ5P14VCHwHCTuWcx2a8M8be-JWZuvp40WGio_MQqsPcn.jpg"
        class="w-10 h-10 rounded-xl object-cover" alt="">
      <div class="flex-1 min-w-0">
        <div class="flex items-center gap-2">
          <div class="font-semibold truncate max-w-[130px]">
            ‚éØÍØ≠‚Äåñ£ê·™µ‚Äåñ°°ùÜ≠ÍØ≠êéì‚è§‚Äå‚ÄåùêÉÍ´ùùê´ùê§ùêõùê®ùê≤ ÍØ≠ñ†åêéôÍ≠ô‚Äå‚Äå‚Å∑ ñ°°ùÜ≠ÍØ≠          </div>
          <span
            class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
        </div>
        <div class="text-xs text-slate-400 truncate">@TheDarkAgain</div>
      </div>
      <span class="text-[11px] px-2 py-1 rounded-md bg-white/10 text-slate-300">View</span>
    </a>

    <nav class="px-2 text-sm space-y-1">
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 " href="./dashboard.php"><svg
          class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 3l9 8h-3v9H6v-9H3l9-8z" />
        </svg><span>Dashboard</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-amber-500/10 text-amber-300 "
        href="./deposit.php"><svg class="w-4 h-4 text-amber-300" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 7l4 4 5-8 5 8 4-4v10H3V7z" />
        </svg><span class="font-medium">Deposit XCoin</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-amber-500/10 text-amber-300 "
        href="./buy.php"><svg class="w-4 h-4 text-amber-300" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 7l4 4 5-8 5 8 4-4v10H3V7z" />
        </svg><span class="font-medium">Buy Premium</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 " href="./redeem.php"><svg
          class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 6H4a2 2 0 00-2 2v3h20V8a2 2 0 00-2-2zM2 21a2 2 0 002 2h16a2 2 0 002-2v-8H2v8z" />
        </svg><span>Redeem</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 bg-white/5" href="./checkers.php"><svg
          class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor">
          <path d="M9 16.2l-3.5-3.5L4 14.2l5 5 11-11-1.5-1.5z" />
        </svg><span>Checkers</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 "
        href="./autohitters.php"><svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor">
          <path d="M9 16.2l-3.5-3.5L4 14.2l5 5 11-11-1.5-1.5z" />
        </svg><span>Auto Hitters</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 " href="./killers.php"><svg
          class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor">
          <path d="M14.7 6.3l3 3L9 18H6v-3l8.7-8.7zM17 2l5 5-2 2-5-5 2-2z" />
        </svg><span>CC Killer</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 "
        href="./settings.php"><svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M19.14 12.94a8 8 0 000-1.88l2.03-1.58-1.92-3.32-2.39.96a8.06 8.06 0 00-1.63-.94L14.5 2h-5l-.7 2.18c-.57.23-1.12.53-1.63.94l-2.39-.96L2.86 7.5l2.03 1.58a8.6 8.6 0 000 1.84L2.86 12.5l1.92 3.32 2.39-.96c.5.4 1.05.71 1.63.94L9.5 22h5l.7-2.18c.57-.23 1.12-.53 1.63-.94l2.39.96 1.92-3.32-2.03-1.58z" />
        </svg><span>Settings</span></a>
          </nav>

    <div class="mt-auto p-4">
      <a href="../logout.php"
        class="w-full inline-flex items-center justify-center rounded-xl bg-rose-500/15 text-rose-300 px-3 py-2 hover:bg-rose-500/20">
        <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="currentColor">
          <path d="M16 13v-2H7V8l-5 4 5 4v-3h9zM20 3h-8v2h8v14h-8v2h8a2 2 0 002-2V5a2 2 0 00-2-2z" />
        </svg>Logout
      </a>
    </div>
  </aside>

  <!-- MOBILE SIDEBAR (all pages) -->
  <aside id="mSide"
    class="lg:hidden fixed inset-y-0 left-0 w-72 z-50 bg-slate-900/95 border-r border-white/10 p-4 no-scrollbar">
    <a href="./settings.php" class="flex items-center gap-3 mb-4">
      <img
        src="https://t.me/i/userpic/320/3kPKhmaQ6Jn-fbZz_b-hZ5P14VCHwHCTuWcx2a8M8be-JWZuvp40WGio_MQqsPcn.jpg"
        class="w-9 h-9 rounded-lg object-cover" alt="">
      <div class="min-w-0">
        <div class="font-semibold truncate max-w-[130px]">
          ‚éØÍØ≠‚Äåñ£ê·™µ‚Äåñ°°ùÜ≠ÍØ≠êéì‚è§‚Äå‚ÄåùêÉÍ´ùùê´ùê§ùêõùê®ùê≤ ÍØ≠ñ†åêéôÍ≠ô‚Äå‚Äå‚Å∑ ñ°°ùÜ≠ÍØ≠        </div>
        <div class="text-xs text-slate-400 truncate">@TheDarkAgain</div>
      </div>
      <span
        class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
    </a>
    <nav class="px-1 text-sm space-y-1">
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="./dashboard.php">Dashboard</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="./deposit.php">Deposit XCoin</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="./buy.php">Buy Premium</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="./redeem.php">Redeem</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 bg-white/5" href="./checkers.php">Checkers</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="./autohitters.php">Auto Hitters</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="./killers.php">CC Killers</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="./settings.php">Settings</a>
            <div class="pt-6">
        <a href="../logout.php"
          class="w-full inline-flex items-center justify-center rounded-xl bg-rose-500/15 text-rose-300 px-3 py-2 hover:bg-rose-500/20">Logout</a>
      </div>
    </nav>
  </aside>

  <!-- CENTER -->
  <main class="scrollCenter">
    <!-- Header (fixed) -->
    <header class="sticky top-0 z-10 bg-slate-950/80 backdrop-blur border-b border-white/10">
      <div class="px-4 lg:px-6 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-xl bg-gradient-to-tr from-blue-500 to-emerald-400 flex items-center justify-center shadow">
            <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zM7.5 12l2.5 2.5L16.5 8l1.5 1.5-8 8L6 13.5 7.5 12z"/></svg>
          </div>
          <div class="font-semibold">MD CC CHK</div>
        </div>
        <div class="inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1.5 text-xs text-slate-200 font-mono">
          <svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M12 20a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm.5-12h-1v5l4 2 .5-.9-3.5-1.8V8z"/></svg>
          <span id="liveClock">--:--:--</span>
        </div>
      </div>
    </header>

    <!-- CENTER CONTENT -->
    <section class="p-4 lg:p-6 space-y-6 pb-28 lg:pb-6">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
<!-- LEFT: Controls -->
        <section class="lg:col-span-2 glass card-shadow p-8">
          <h2 class="text-2xl section-title mb-6">MD CC CHK Checkers & Multi APIs</h2>

          <!-- Hidden inline selects: we‚Äôll configure them from the modal -->
          <div id="inlineConfigRow" class="grid sm:grid-cols-3 gap-6">
            <div class="sm:col-span-1 select-container">
              <label class="block text-sm font-medium text-slate-200 mb-2">Select Gateway</label>
              <select id="gateway" class="w-full px-4 py-3 text-sm">
                <option value="">Select Gateway</option>
                <option value="amazon">Amazon</option>
                <option value="stripe">Stripe</option>
                <option value="braintree">Braintree</option>
                <option value="paypal">PayPal</option>
                <option value="payflow">PayFlow</option>
                <option value="shopify">Shopify</option>
                <option value="fastspring">FastSpring</option>
                <option value="nmi">NMI</option>
                <option value="razorpay">Razorpay</option>
                <option value="square">Square</option>
                <option value="authnet">Auth.net</option>
                <option value="adyen">Adyen</option>
                <option value="vbvlookup">3DS Lookup</option>
              </select>
            </div>
            <div class="sm:col-span-1 select-container">
              <label class="block text-sm font-medium text-slate-200 mb-2">Select API</label>
              <select id="api" class="w-full px-4 py-3 text-sm"></select>
              <div id="apiStatusPill" class="api-pill mt-2" style="display:none;">‚Äî</div>
              <p id="apiLockHint" class="text-[12px] mt-2 text-rose-300 hidden">Some APIs are locked for your plan. Upgrade to unlock üîí</p>
            </div>
            <div class="sm:col-span-1">
              <label class="block text-sm font-medium text-slate-200 mb-2">Proxy Settings</label>
              <div class="flex items-center gap-4">
                <label class="inline-flex items-center cursor-pointer">
                  <input id="proxySwitch" type="checkbox" class="peer sr-only">
                  <span class="w-11 h-6 bg-slate-700 rounded-full relative after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:w-5 after:h-5 after:bg-white after:rounded-full after:transition-all duration-300 peer-checked:bg-emerald-500 peer-checked:after:left-[1.5rem]"></span>
                </label>
                <span class="text-sm text-slate-200">Use proxy</span>
              </div>
              <div id="proxyMissingMsg" class="text-xs mt-2 text-rose-300 hidden">Proxy missing ‚ùå</div>
              <div id="proxySelectContainer" class="hidden mt-2">
                <label class="block text-sm font-medium text-slate-200 mb-1">Select Proxy</label>
                <select id="proxySelect" class="w-full px-3 py-2 text-sm">
                  <option value="random">Random</option>
                </select>
              </div>
            </div>
          </div>
          
          <!-- Configure + Tools buttons -->
          <div class="mt-4 flex gap-2">
            <button id="openCfgBtn" class="rounded-lg px-4 py-2 btn-muted text-sm"><i class="fa-solid fa-sliders mr-1"></i> Configure (Gateway ‚Ä¢ API ‚Ä¢ Proxy)</button>
            <button id="openToolsBtn" class="rounded-lg px-4 py-2 btn-muted text-sm"><i class="fa-solid fa-wrench mr-1"></i> Tools</button>
          </div>

          <!-- Card List -->
          <div class="mt-6">
            <label class="block text-sm font-medium text-slate-200 mb-2">Card List</label>
            <textarea id="cardList" class="w-full h-64 px-4 py-3 text-sm font-mono" placeholder="cc|mm|yyyy|cvv ‚Äî one per line"></textarea>
          </div>

          <!-- Import -->
          <div class="mt-4">
            <label class="inline-flex items-center justify-center w-full rounded-lg border border-white/10 bg-slate-900/60 hover:bg-slate-800 px-4 py-3 text-sm cursor-pointer transition">
              <input id="fileInput" type="file" accept=".txt" hidden>
              <span class="inline-flex items-center gap-2"><i class="fa-solid fa-arrow-up-from-bracket"></i> Import Cards (.txt)</span>
            </label>
          </div>

          <!-- SK Key -->
          <div id="skInputContainer" class="hidden mt-4">
            <label class="block text-sm font-medium text-slate-200 mb-2">Drop Your SK Key (Optional)</label>
            <input type="text" id="skInput" class="w-full input-like" placeholder="Enter SK Key (e.g., sk_live_...)">
          </div>

          <!-- Shopify URLs -->
          <div id="urlInputContainer" class="hidden mt-4">
            <label class="block text-sm font-medium text-slate-200 mb-2">Shopify URLs or Package (Required)</label>
            <textarea id="urlInput" class="w-full input-like min-h-28 hidden" placeholder="Enter Shopify URLs (e.g., https://example.com or domain.com, one per line)"></textarea>
            <select id="urlPackageSelect" class="w-full px-3 py-2 text-sm select-container hidden text-gray-300 bg-gray-800 text-gray-200">
              <option value="free" class="bg-gray-800">Free</option>
            </select>
          </div>
          
          <!-- Amazon Cookie -->
          <div id="cookieInputContainer" class="hidden mt-4">
            <label class="block text-sm font-medium text-slate-200 mb-2">Amazon Cookie (Required)</label>
            <textarea id="cookieInput" class="w-full input-like min-h-28" placeholder="Enter Amazon cookie (one per line)"></textarea>
          </div>
          
          <!-- Site Link -->
          <div id="siteLinkInputContainer" class="hidden mt-4">
            <label class="block text-sm font-medium text-slate-200 mb-2">Site Link (Required)</label>
            <input type="text" id="siteLinkInput" class="w-full input-like" placeholder="Enter Site (e.g. example.com)">
          </div>

          <!-- Amount Input (Razorpay) -->
          <div id="amountInputContainer" class="hidden mt-4">
            <label class="block text-sm font-medium text-slate-200 mb-2">Amount (INR)</label>
            <input type="number" id="amountInput" class="w-full input-like" placeholder="Enter Amount (e.g. 100)">
          </div>          
          <!-- PayPal Key Based -->
          <div id="paypalKeyInputContainer" class="hidden mt-4">
            <label class="block text-sm font-medium text-slate-200 mb-2">PayPal Client ID (Optional)</label>
            <input type="text" id="paypalClientId" class="w-full input-like" placeholder="e.g. AexxxxxxXxxxxX_XxxxxxX">
            <label class="block text-sm font-medium text-slate-200 mt-4 mb-2">PayPal Client Secret (Optional)</label>
            <input type="text" id="paypalClientSecret" class="w-full input-like" placeholder="e.g. EPxxxxxxXxxxxX_XxxxxxX">
            <p class="text-xs text-slate-400 mt-2">Leave empty to use default keys</p>
          </div>

          <!-- Stripe Package -->
          <div id="stripePackageContainer" class="hidden mt-4">
            <label class="block text-sm font-medium text-slate-200 mb-2">Site Package (Inbuilt)</label>
            <select id="stripePackageSelect" class="w-full px-3 py-2 text-sm select-container text-gray-300 bg-gray-800 text-gray-200">
              <option value="free">Free Sites</option>
            </select>
          </div>

          <!-- Actions + Progress -->
          <div class="mt-6 flex flex-wrap items-center gap-4">
            <button id="btnStart" class="rounded-lg btn-primary px-6 py-3 text-sm"><i class="fas fa-play mr-1"></i> Start Checking</button>
            <button id="btnStop" class="rounded-lg bg-rose-500/90 px-6 py-3 text-sm font-semibold text-white hover:bg-rose-500 disabled:opacity-50" disabled><i class="fas fa-stop mr-1"></i> Stop</button>
            <button id="btnClear" class="rounded-lg btn-muted px-6 py-3 text-sm"><i class="fas fa-trash mr-1"></i> Clear All</button>
          </div>

          <div id="progressWrap" class="hidden"><div id="progressBar"></div></div>
          <div id="progressText" class="hidden">0% ‚Ä¢ 0/0</div>


        </section>

        <!-- RIGHT: Stats -->
        <aside class="glass card-shadow p-5">
          <h2 class="text-2xl section-title mb-6">Statistics</h2>
          <!-- User Profile Card with PHP data -->
          <div class="border border-white/10 bg-gradient-to-b from-slate-900/60 to-slate-800/40 rounded-xl p-3 mb-4 flex items-center gap-3">
            <div class="avatar-ring"><img src="https://t.me/i/userpic/320/3kPKhmaQ6Jn-fbZz_b-hZ5P14VCHwHCTuWcx2a8M8be-JWZuvp40WGio_MQqsPcn.jpg" alt="Profile" class="profile-pic" onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/identicon/svg?seed=User'"></div>
            <div class="min-w-0">
              <div class="flex items-center gap-2">
                <span class="name truncate" title="TheDarkAgain">TheDarkAgain</span>
                <span class="badge">free</span>
              </div>
              <div class="mt-0.5 text-sm text-slate-400 truncate" title="@TheDarkAgain">@TheDarkAgain</div>
            </div>
          </div>
          <!-- Stats List -->
          <ul class="space-y-2 text-sm">
            <li class="flex items-center justify-between"><span class="inline-flex items-center gap-2"><i class="fas fa-list-ul text-sky-400"></i> Total Cards</span><span id="statTotal" class="font-semibold">0</span></li>
            <li class="flex items-center justify-between"><span class="inline-flex items-center gap-2"><i class="fas fa-check-circle text-amber-300"></i> Approved</span><span id="statApproved" class="font-semibold text-amber-300">0</span></li>
            <li class="flex items-center justify-between"><span class="inline-flex items-center gap-2"><i class="fas fa-heartbeat text-emerald-400"></i> Live</span><span id="statLive" class="font-semibold text-emerald-400">0</span></li>
            <li class="flex items-center justify-between"><span class="inline-flex items-center gap-2"><i class="fas fa-ban text-rose-400"></i> Dead</span><span id="statDead" class="font-semibold text-rose-400">0</span></li>
            <li class="flex items-center justify-between"><span class="inline-flex items-center gap-2"><i class="fas fa-clock text-sky-400"></i> Remaining</span><span id="statYet" class="font-semibold">0</span></li>
            <li class="flex items-center justify-between"><span class="inline-flex items-center gap-2"><i class="fas fa-coins text-yellow-300"></i> Credits</span><span id="statCred" class="font-semibold text-yellow-300">50</span></li>
            <li class="flex items-center justify-between"><span class="inline-flex items-center gap-2"><i class="fas fa-stopwatch text-fuchsia-300"></i> Limit</span><span id="statLimit" class="font-semibold text-fuchsia-300">100</span></li>
            <li class="flex items-center justify-between"><span class="inline-flex items-center gap-2"><i class="fas fa-server text-cyan-300"></i> Current API</span><span id="statGateway" class="font-semibold text-cyan-300">Select API</span></li>
            <li class="flex items-center justify-between">
              <span class="inline-flex items-center gap-2"><i class="fas fa-tachometer-alt text-emerald-400"></i> Gate Speed (avg)</span>
              <span id="statSpeed" class="font-semibold">‚Äî</span>
            </li>
            <li class="mt-3">
              <div class="text-xs text-slate-400 mb-1">Per-API Speed (this session)</div>
              <ul id="apiSpeedList" class="text-sm space-y-1"></ul>
            </li>
          </ul>
        </aside>
      </div>
          <!-- Panel switch -->
          <div class="mt-10 flex items-center justify-center gap-3">
            <button id="tabApproved" class="rounded-xl px-4 py-2 text-sm font-medium btn-muted">Approved</button>
            <button id="tabLive" class="rounded-xl px-4 py-2 text-sm font-medium btn-muted">Live</button>
            <button id="tabDead" class="rounded-xl px-4 py-2 text-sm font-medium btn-muted">Dead</button>
          </div>

          <!-- Results -->
          <section class="mt-6 space-y-6">
            <div id="panelApproved" class="glass card-shadow p-6">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold">Approved Results</h3>
                <button id="copyApproved" class="rounded-lg btn-muted px-4 py-2">Copy</button>
              </div>
              <pre id="approvedBox" class="result mt-4 text-[13px] min-h-24"></pre>
            </div>

            <div id="panelLive" class="glass card-shadow p-6 hidden">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold">Live Results</h3>
                <button id="copyLive" class="rounded-lg btn-muted px-4 py-2">Copy</button>
              </div>
              <pre id="liveBox" class="result mt-4 text-[13px] min-h-24"></pre>
            </div>

            <div id="panelDead" class="glass card-shadow p-6 hidden">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold">Dead Results</h3>
                <button id="clearDead" class="rounded-lg px-4 py-2 bg-rose-500/15 border border-rose-400/30 hover:bg-rose-500/25 text-rose-200">Clear</button>
              </div>
              <pre id="deadBox" class="result mt-4 text-[13px] min-h-24"></pre>
            </div>
          </section>

    </section>
  </main>
</div>

<!-- ===== Configuration Modal ===== -->
<div id="cfgModal" class="fixed inset-0 z-[120] hidden">
  <div class="absolute inset-0 bg-slate-900/70 backdrop-blur-sm"></div>
  <div class="relative min-h-full flex items-end sm:items-center justify-center p-4">
    <div class="sheet translate-y-4 opacity-0 transition-all duration-200">
      <div class="rounded-2xl border border-white/10 bg-gradient-to-b from-slate-900 to-slate-800 shadow-2xl p-5">
        <div class="modal-content">
          <div class="stepper">
            <div id="s1" class="step on">1. Gateway</div>
            <div id="s2" class="step">2. API</div>
            <div id="s3" class="step">3. Proxy & Advanced Settings</div>
          </div>
          <!-- Step 1 -->
          <div id="step1">
            <div class="text-sm text-slate-300 mb-2">Select a gateway</div>
            <div id="gwList" class="fsel-list"></div>
          </div>
          <!-- Step 2 -->
          <div id="step2" class="hidden">
            <div class="text-sm text-slate-300 mb-2">Select an API</div>
            <div id="apiList" class="fsel-list"></div>
          </div>
          <!-- Step 3 -->
          <div id="step3" class="hidden">
            <div class="fsel-list">
              <div class="grid sm:grid-cols-2 gap-6 bg-gradient-to-br from-slate-900 to-slate-800 p-6 rounded-xl shadow-lg border border-gray-800">
                <!-- Proxy Settings -->
                <div class="rounded-lg bg-gray-900 p-5 border border-gray-700">
                  <div class="text-sm font-semibold text-gray-200 mb-4">Proxy Configuration</div>
                  
                  <label class="flex items-center justify-between mb-4 cursor-pointer group">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Enable Proxy</span>
                    <div class="flex items-center gap-3">
                      <input id="cfgProxySwitch" type="checkbox" class="peer sr-only" checked>
                      <div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer-checked:bg-emerald-600 transition-colors duration-200">
                          <div class="absolute top-[2px] left-[2px] bg-white border-gray-300 border rounded-full h-5 w-5 transition-transform duration-200 peer-checked:translate-x-full peer-checked:border-white"></div>
                      </div>
                      <!-- OFF Text -->
                      <span class="text-xs font-bold w-8 text-center text-gray-500 block peer-checked:hidden">OFF</span>
                      <!-- ON Text -->
                      <span class="text-xs font-bold w-8 text-center text-emerald-400 hidden peer-checked:block">ON</span>
                    </div>
                  </label>

                  <div id="cfgProxySelectWrap" class="mt-4">
                    <label class="block text-xs text-gray-400 mb-2">Proxy Selection</label>
                    <select id="cfgProxySelect" class="w-full px-4 py-2 text-sm bg-gray-800 text-gray-200 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all duration-200">
                      <option value="random" class="bg-gray-800">Random</option>
                    </select>
                  </div>
                </div>
                <!-- Tools & Settings -->
                <div class="rounded-lg bg-gray-900 p-5 border border-gray-700">
                  <div class="text-sm font-semibold text-gray-200 mb-4">Advanced Settings</div>
                  
                  <label class="flex items-center justify-between mb-4 cursor-pointer group">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Blur Mode</span>
                    <div class="flex items-center gap-3">
                      <input id="cfgBlurSwitch" type="checkbox" class="peer sr-only">
                      <div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer-checked:bg-emerald-600 transition-colors duration-200">
                          <div class="absolute top-[2px] left-[2px] bg-white border-gray-300 border rounded-full h-5 w-5 transition-transform duration-200 peer-checked:translate-x-full peer-checked:border-white"></div>
                      </div>
                      <!-- OFF Text -->
                      <span class="text-xs font-bold w-8 text-center text-gray-500 block peer-checked:hidden">OFF</span>
                      <!-- ON Text -->
                      <span class="text-xs font-bold w-8 text-center text-emerald-400 hidden peer-checked:block">ON</span>
                    </div>
                  </label>

                  <label class="flex items-center justify-between mb-4 cursor-pointer group">
                    <span class="text-sm text-gray-300 group-hover:text-white transition-colors">Hit Sound</span>
                    <div class="flex items-center gap-3">
                      <input id="cfgHitSoundSwitch" type="checkbox" class="peer sr-only" checked>
                      <div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer-checked:bg-emerald-600 transition-colors duration-200">
                          <div class="absolute top-[2px] left-[2px] bg-white border-gray-300 border rounded-full h-5 w-5 transition-transform duration-200 peer-checked:translate-x-full peer-checked:border-white"></div>
                      </div>
                      <!-- OFF Text -->
                      <span class="text-xs font-bold w-8 text-center text-gray-500 block peer-checked:hidden">OFF</span>
                      <!-- ON Text -->
                      <span class="text-xs font-bold w-8 text-center text-emerald-400 hidden peer-checked:block">ON</span>
                    </div>
                  </label>

                  <div class="flex items-center justify-between mb-4">
                    <span class="text-sm text-gray-300">Auto API Config</span>
                    <select id="cfgAutoApiConfig" class="w-40 px-4 py-2 text-sm bg-gray-800 text-gray-200 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all duration-200">
                      <option value="inbuilt" class="bg-gray-800">Inbuilt</option>
                      <option value="custom" class="bg-gray-800">Custom</option>
                    </select>
                  </div>
                  <div class="flex items-center justify-between mb-4">
                    <span class="text-sm text-gray-300">Hit Sender</span>
                    <select id="cfgHitSender" class="w-40 px-4 py-2 text-sm bg-gray-800 text-gray-200 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all duration-200">
                      <option value="both" class="bg-gray-800">Both</option>
                      <option value="charge" class="bg-gray-800">Approve</option>
                      <option value="live" class="bg-gray-800">Live</option>
                    </select>
                  </div>
                  <button id="cfgResetAllBtn" class="w-full rounded-lg px-4 py-2 bg-red-900/30 hover:bg-red-900/50 border border-red-700 text-red-200 text-sm font-medium transition-colors duration-200">
                    <i class="fa-solid fa-rotate-left mr-2"></i> Reset All Settings
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- Sticky buttons -->
          <div class="mt-5 flex items-center justify-between">
            <button id="cfgCancel" class="px-4 py-2 rounded-lg btn-muted text-sm">Cancel</button>
            <div class="flex gap-2">
              <button id="cfgBack" class="px-4 py-2 rounded-lg btn-muted text-sm hidden">Back</button>
              <button id="cfgNext" class="px-4 py-2 rounded-lg btn-primary text-sm">Next</button>
              <button id="cfgSave" class="px-4 py-2 rounded-lg btn-primary text-sm hidden">Save & Apply</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Tools Modal -->
<div id="toolsModal" class="fixed inset-0 z-[120] hidden">
  <div class="absolute inset-0 bg-slate-900/70 backdrop-blur-sm"></div>
  <div class="relative min-h-full flex items-end sm:items-center justify-center p-4">
    <div id="toolsSheet" class="w-full max-w-lg translate-y-4 opacity-0 transition-all duration-200">
      <div class="rounded-2xl border border-white/10 bg-gradient-to-b from-slate-900 to-slate-800 shadow-2xl">
        <div class="px-5 py-4 border-b border-white/10 flex items-center justify-between">
          <h3 class="text-lg font-semibold"><i class="fa-solid fa-toolbox mr-2"></i>Tools</h3>
          <button id="toolsClose" class="px-3 py-1.5 rounded-md btn-muted text-sm"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <!-- Tools content -->
        <div class="p-4 space-y-4 max-h-[70vh] overflow-y-auto">
          <!-- CC Generator -->
          <div class="rounded-xl border border-white/10 bg-slate-900/50 p-4">
            <h4 class="text-center text-amber-400 font-bold mb-3">CC GENERATOR</h4>
            <div class="grid grid-cols-2 gap-3">
              <input id="genbin" class="col-span-2 input-like text-center" placeholder="BIN HERE (example - 401924)">
              <input id="genqty" class="input-like text-center" placeholder="QTY (e.g., 10)">
              <input id="gencvv" class="input-like text-center" placeholder="CVV (optional)">
              <div class="col-span-1">
                <select id="month" class="input-like w-full">
                  <option value="Random">MONTH</option>
                  <option value="Random">RANDOM</option>
                  <option value="01">1</option><option value="02">2</option><option value="03">3</option><option value="04">4</option><option value="05">5</option><option value="06">6</option><option value="07">7</option><option value="08">8</option><option value="09">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option>
                </select>
              </div>
              <div class="col-span-1">
                <select id="year" class="input-like w-full">
                  <option value="Random">YEAR</option>
                  <option value="Random">RANDOM</option>
                  <option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option><option value="2028">2028</option><option value="2029">2029</option><option value="2030">2030</option><option value="2031">2031</option><option value="2032">2032</option>
                </select>
              </div>
            </div>
            <button id="btnGen" class="mt-3 w-full rounded-lg px-4 py-2 btn-muted"><i class="fa-solid fa-wand-magic-sparkles mr-1"></i> Generate ‚Üí Add to Card List</button>
          </div>

          <!-- BIN Lookup -->
          <div class="rounded-xl border border-white/10 bg-slate-900/50 p-4">
            <h4 class="text-center text-cyan-400 font-bold mb-3">BIN LOOKUP</h4>
            <input id="binLookupInput" class="input-like text-center mb-3" placeholder="Enter BIN (6 digits)">
            <button id="btnBinLookup" class="w-full rounded-lg px-4 py-2 btn-muted"><i class="fa-solid fa-search mr-1"></i> Lookup BIN</button>
            <div id="binLookupResult" class="mt-3 hidden">
              <div class="text-xs space-y-2 bg-slate-800/50 rounded-lg p-3 border border-white/5">
                <div class="flex justify-between"><span class="text-slate-400">Brand:</span><span id="binBrand" class="font-semibold text-emerald-400">-</span></div>
                <div class="flex justify-between"><span class="text-slate-400">Type:</span><span id="binType" class="font-semibold">-</span></div>
                <div class="flex justify-between"><span class="text-slate-400">Level:</span><span id="binLevel" class="font-semibold">-</span></div>
                <div class="flex justify-between"><span class="text-slate-400">Bank:</span><span id="binBank" class="font-semibold">-</span></div>
                <div class="flex justify-between"><span class="text-slate-400">Country:</span><span id="binCountry" class="font-semibold">-</span></div>
              </div>
            </div>
          </div>

          <!-- BIN CHK -->
          <div class="rounded-xl border border-white/10 bg-slate-900/50 p-4">
            <h4 class="text-center text-fuchsia-400 font-bold mb-3">BIN CHK</h4>
            <textarea id="binChkInput" class="input-like text-center mb-3" rows="3" placeholder="Enter multiple BINs (one per line)"></textarea>
            <button id="btnBinChk" class="w-full rounded-lg px-4 py-2 btn-muted"><i class="fa-solid fa-list-check mr-1"></i> Check All BINs</button>
            <div id="binChkResult" class="mt-3 hidden max-h-60 overflow-y-auto">
              <div class="text-xs space-y-2" id="binChkResultList"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Credits Info Modal -->
<div id="creditsModal" class="fixed inset-0 z-[100] hidden">
  <div class="absolute inset-0 bg-slate-900/70 backdrop-blur-sm"></div>
  <div class="relative min-h-full flex items-end sm:items-center justify-center p-4">
    <div id="creditsCard" class="w-full max-w-md translate-y-4 sm:translate-y-0 opacity-0 transition-all duration-200">
      <div class="rounded-2xl border border-white/10 bg-gradient-to-b from-slate-900 to-slate-800 shadow-2xl">
        <div class="px-5 py-4 border-b border-white/10">
          <h3 class="text-lg font-semibold">Credits System</h3>
          <p class="text-xs text-slate-400 mt-0.5">Please review how credits are used across gates. No credits deduction for Dead Cards ‚ö†Ô∏è</p>
        </div>
        <div class="px-5 py-4 space-y-4 text-sm text-slate-300">
          <div>
            <div class="text-slate-200 font-medium mb-1">Auth Gates</div>
            <ul class="space-y-1">
              <li class="flex items-center gap-2"><span class="w-1.5 h-1.5 rounded-full bg-emerald-400"></span> Approved = <span class="font-semibold"> - 3 credits</span></li>
              <li class="flex items-center gap-2"><span class="w-1.5 h-1.5 rounded-full bg-sky-400"></span> Live = <span class="font-semibold"> - 1 credits</span></li>
            </ul>
          </div>
          <div class="border-t border-white/10 pt-3">
            <div class="text-slate-200 font-medium mb-1">Charge Gates</div>
            <ul class="space-y-1">
              <li class="flex items-center gap-2"><span class="w-1.5 h-1.5 rounded-full bg-fuchsia-400"></span> Charge = <span class="font-semibold"> - 5 credits</span></li>
              <li class="flex items-center gap-2"><span class="w-1.5 h-1.5 rounded-full bg-amber-400"></span> Live = <span class="font-semibold"> - 3 credits</span></li>
            </ul>
          </div>
        </div>
        <div class="px-5 pb-5">
        <button id="ackBtn" class="w-full rounded-xl px-4 py-2.5 font-semibold text-slate-900" style="background: linear-gradient(90deg,#34d399,#67e8f9)">I acknowledge</button>
        </div>
      </div>
    </div>
  </div>
</div>

<audio id="approvedSound" src="/assets/sounds/charge.mp3"></audio>
<audio id="liveSound" src="/assets/sounds/live.mp3"></audio>

<script>
(() => {
  // ---------- helpers ----------
  const $ = sel => document.querySelector(sel);
  const byId = id => document.getElementById(id);
  const toast = (msg, type='info') => {
    Swal.fire({ toast: true, position: 'top-end', showConfirmButton: false, timer: 2600, icon: type, title: msg,
      background: 'rgba(2,6,23,.95)', color: '#fff', iconColor: '#34d399' });
  };
  const esc = (s) => String(s ?? '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;');
  
  // Fancy hit toast (with response)
  const hitToast = (resp, type='success') => {
    const txt = String(resp ?? '').trim();
    Swal.fire({
      toast: true, position: 'top-end', showConfirmButton: false, timer: 2600, icon: type, title: 'Hit Detected !',
      html: `<div class="text-[13px] leading-snug">${esc(txt)}</div>`,
      background: 'rgba(2,6,23,.95)', color: '#fff', iconColor: type === 'success' ? '#34d399' : '#60a5fa'
    });
  };

  // Progress
  const $pWrap = document.getElementById('progressWrap');
  const $pBar = document.getElementById('progressBar');
  const $pText = document.getElementById('progressText');
  let P_TOTAL=0, P_DONE=0;
  function initProgress(total){
    P_TOTAL=total; P_DONE=0;
    $pWrap?.classList.remove('hidden'); $pText?.classList.remove('hidden');
    $pBar.style.width='0%'; $pText.textContent=`0% ‚Ä¢ 0/${P_TOTAL}`;
  }
  function tickProgress(){
    P_DONE=Math.min(P_DONE+1,P_TOTAL);
    const pct=P_TOTAL?Math.round((P_DONE/P_TOTAL)*100):0;
    $pBar.style.width=pct+'%'; $pText.textContent=`${pct}% ‚Ä¢ ${P_DONE}/${P_TOTAL}`;
    if(P_DONE>=P_TOTAL){ $pWrap.classList.add('hidden'); $pText.classList.add('hidden'); }
  }

  // ===== LocalStorage keys =====
  const CFG_KEY = 'cx_cfg_v2';
  const BLUR_KEY = 'cx_blur_mode_v1';
  const SK_LS_KEY = 'cx_input_sk_v1';
  const URLS_LS_KEY = 'cx_input_urls_v1';
  const COOKIE_LS_KEY = 'cx_input_cookie_v1';
  const SITE_LINK_LS_KEY = 'cx_input_site_link_v1';
  const HIT_SOUND_KEY = 'cx_hit_sound_v1';
  const AUTO_API_CONFIG_KEY = 'cx_auto_api_config_v1';
  const HIT_SENDER_KEY = 'cx_hit_sender_v1';

  // ===== Blur helpers =====
  function setBlur(on, persist = true){
    const root = document.getElementById('mainRoot');
    root && root.classList.toggle('blur-mode', !!on);
    if (typeof $cfgBlurSwitch !== 'undefined' && $cfgBlurSwitch) $cfgBlurSwitch.checked = !!on;
    if (persist) { try { localStorage.setItem(BLUR_KEY, on ? '1' : '0'); } catch{} }
  }
  try {
    const saved = localStorage.getItem(BLUR_KEY);
    if (saved === '1') setBlur(true, false);
    else if (saved === '0') setBlur(false, false);
  } catch {}

  // ===== Hit Sound helpers =====
  function setHitSound(on, persist = true){
    if (typeof $cfgHitSoundSwitch !== 'undefined' && $cfgHitSoundSwitch) $cfgHitSoundSwitch.checked = !!on;
    if (persist) { try { localStorage.setItem(HIT_SOUND_KEY, on ? '1' : '0'); } catch{} }
  }
  try {
    const saved = localStorage.getItem(HIT_SOUND_KEY);
    if (saved === '1') setHitSound(true, false);
    else if (saved === '0') setHitSound(false, false);
    else setHitSound(true, false); // Default enabled
  } catch {}

  // ---------- dom ----------
  const $gateway = byId('gateway');
  const $api = byId('api');
  const $proxySw = byId('proxySwitch');
  const $proxySelectContainer = byId('proxySelectContainer');
  const $proxySelect = byId('proxySelect');
  const $file = byId('fileInput');
  const $txt = byId('cardList');
  const $start = byId('btnStart');
  const $stop = byId('btnStop');
  const $clear = byId('btnClear');
  const $boxApproved = byId('approvedBox');
  const $boxLive = byId('liveBox');
  const $boxDead = byId('deadBox');
  const $statTotal = byId('statTotal');
  const $statApproved = byId('statApproved');
  const $statLive = byId('statLive');
  const $statDead = byId('statDead');
  const $statYet = byId('statYet');
  const $statCred = byId('statCred');
  const $statGateway = byId('statGateway');
  const $tabApproved = byId('tabApproved');
  const $tabLive = byId('tabLive');
  const $tabDead = byId('tabDead');
  const $panelApproved = byId('panelApproved');
  const $panelLive = byId('panelLive');
  const $panelDead = byId('panelDead');
  const $skInputContainer = byId('skInputContainer');
  const $skInput = byId('skInput');
  const $urlInputContainer = byId('urlInputContainer');
  const $urlInput = byId('urlInput');
  const $urlPackageSelect = byId('urlPackageSelect');
  const $cookieInput = byId('cookieInput');
  const $cookieInputContainer = byId('cookieInputContainer');
  const $siteLinkInputContainer = byId('siteLinkInputContainer');
  const $siteLinkInput = byId('siteLinkInput');
  const $amountInputContainer = byId('amountInputContainer');
  const $amountInput = byId('amountInput');
  const $stripePackageContainer = byId('stripePackageContainer');
  const $stripePackageSelect = byId('stripePackageSelect');
  const $paypalKeyInputContainer = byId('paypalKeyInputContainer');
  const $paypalClientId = byId('paypalClientId');
  const $paypalClientSecret = byId('paypalClientSecret');
  const $apiLockHint = byId('apiLockHint');
  const $genbin = byId('genbin');
  const $genqty = byId('genqty');
  const $gencvv = byId('gencvv');
  const $month = byId('month');
  const $year = byId('year');
  const $btnGen = byId('btnGen');
  const $cfgModal = byId('cfgModal');
  const $cfgSheet = $cfgModal?.querySelector('.sheet');
  const $cfgNext = byId('cfgNext');
  const $cfgBack = byId('cfgBack');
  const $cfgSave = byId('cfgSave');
  const $cfgCancel = byId('cfgCancel');
  const $cfgProxySwitch = byId('cfgProxySwitch');
  const $cfgProxySelect = byId('cfgProxySelect');
  const $cfgProxyWrap = byId('cfgProxySelectWrap');
  const $cfgBlurSwitch = byId('cfgBlurSwitch');
  const $cfgHitSoundSwitch = byId('cfgHitSoundSwitch');
  const $cfgAutoApiConfig = byId('cfgAutoApiConfig');
  const $cfgHitSender = byId('cfgHitSender');
  const $cfgResetAllBtn = byId('cfgResetAllBtn');
  const $openCfgBtn = byId('openCfgBtn');
  let CFG_OK = false;
  const cfg = { gateway: '', api: '', useProxy: false, proxyVal: 'random', hitSound: true, autoApiConfig: 'inbuilt', hitSender: 'both' };


  // ---------- speed tracker ----------
  const SPEED_STATE_KEY = 'cx_speed_state_v1';
  const speed = { n: 0, sumMs: 0, reset(){ this.n = 0; this.sumMs = 0; updateAvg(); saveSpeed(); } };
  const speedByApi = {};
  function saveSpeed(){ try{ localStorage.setItem(SPEED_STATE_KEY, JSON.stringify({ n: speed.n, sumMs: speed.sumMs })); }catch{} }
  function loadSpeed(){ try{ const raw = localStorage.getItem(SPEED_STATE_KEY); if(!raw) return; const s = JSON.parse(raw); if (s && typeof s.n === 'number'){ speed.n = s.n; speed.sumMs = s.sumMs; updateAvg(); } }catch{} }
  function addSample(apiLabel, ms){ speed.n++; speed.sumMs += ms; updateAvg(); saveSpeed(); (speedByApi[apiLabel] ??= {n:0,sumMs:0}); speedByApi[apiLabel].n++; speedByApi[apiLabel].sumMs += ms; renderApiSpeeds(); }
  function updateAvg(){ const el = byId('statSpeed'); el.textContent = speed.n ? ((speed.sumMs / speed.n / 1000).toFixed(2) + ' s') : '‚Äî'; }
  function renderApiSpeeds(){ const ul = byId('apiSpeedList'); if(!ul) return; ul.innerHTML = Object.entries(speedByApi).map(([name,v]) => `<li class="flex justify-between"><span>${name}</span><span>${(v.sumMs/v.n/1000).toFixed(2)} s</span></li>`).join(''); }
  loadSpeed();

  // ---------- persist inputs ----------
  try {
    const savedSk = localStorage.getItem(SK_LS_KEY);
    const savedUrls = localStorage.getItem(URLS_LS_KEY);
    const savedCookie = localStorage.getItem(COOKIE_LS_KEY);
    const savedSiteLink = localStorage.getItem(SITE_LINK_LS_KEY);
    const savedPaypalClientId = localStorage.getItem('cx_paypal_clientid');
    const savedPaypalClientSecret = localStorage.getItem('cx_paypal_clientsecret');
    if (savedPaypalClientId && $paypalClientId) $paypalClientId.value = savedPaypalClientId;
    if (savedPaypalClientSecret && $paypalClientSecret) $paypalClientSecret.value = savedPaypalClientSecret;
    if (savedSk && $skInput) $skInput.value = savedSk;
    if (savedUrls && $urlInput) $urlInput.value = savedUrls;
    if (savedCookie && $cookieInput) $cookieInput.value = savedCookie;
    if (savedSiteLink && $siteLinkInput) $siteLinkInput.value = savedSiteLink;
  } catch {}
  $skInput?.addEventListener('input', () => { try { localStorage.setItem(SK_LS_KEY, ($skInput.value || '').trim()); } catch {} });
  $urlInput?.addEventListener('input', () => { try { localStorage.setItem(URLS_LS_KEY, ($urlInput.value || '').replace(/\r/g,'').trim()); } catch {} });
  $cookieInput?.addEventListener('input', () => { try { localStorage.setItem(COOKIE_LS_KEY, ($cookieInput.value || '').replace(/\r/g,'').trim()); } catch {} });
  $paypalClientId?.addEventListener('input', () => { try { localStorage.setItem('cx_paypal_clientid', $paypalClientId.value.trim()); } catch {} });
  $paypalClientSecret?.addEventListener('input', () => { try { localStorage.setItem('cx_paypal_clientsecret', $paypalClientSecret.value); } catch {} });
  $siteLinkInput?.addEventListener('input', () => { try { localStorage.setItem(SITE_LINK_LS_KEY, ($siteLinkInput.value || '').trim()); } catch {} });

  // ---------- API & Proxy Loading ----------
  let apiMap = {}; // Will be populated dynamically
  let proxyList = [];
  
  // Fetch Gateways from DB
  async function fetchGateways() {
    try {
      const res = await fetch('../api/gateways.php?type=checker');
      const data = await res.json();
      if (data && data.success && data.data) {
        apiMap = data.data;
        // Rebuild lists if config modal is open or just to be ready
        if (typeof buildGatewayList === 'function') buildGatewayList();
      }
    } catch (e) { console.error('Gateway fetch error', e); }
  }
  fetchGateways();

  async function loadProxies() {
    try {
      const res = await fetch('../api/proxies.php?fn=list');
      const data = await res.json();
      if (data && data.ok && Array.isArray(data.items)) {
        proxyList = data.items;
        $proxySelect.innerHTML = '<option value="random">Random</option>';
        $cfgProxySelect.innerHTML = '<option value="random">Random</option>';
        proxyList.forEach(p => {
          const val = JSON.stringify(p);
          const label = `${p.host}:${p.port} (${p.type})`;
          const opt1 = document.createElement('option'); opt1.value = val; opt1.textContent = label;
          const opt2 = document.createElement('option'); opt2.value = val; opt2.textContent = label;
          $proxySelect.appendChild(opt1);
          $cfgProxySelect.appendChild(opt2);
        });
        
        // Update UI
        const msg = byId('proxyMissingMsg');
        if (proxyList.length > 0) {
           msg.classList.add('hidden');
        } else if ($proxySw.checked) {
           msg.classList.remove('hidden');
        }
      }
    } catch (e) { console.error('Failed to load proxies', e); }
  }

  // Add this listener for the proxy switch
  $proxySw.addEventListener('change', () => {
      const msg = byId('proxyMissingMsg');
      $proxySelectContainer.classList.toggle('hidden', !$proxySw.checked);
      
      // SYNC: Update the config object and the modal switch
      cfg.useProxy = $proxySw.checked;
      if ($cfgProxySwitch) $cfgProxySwitch.checked = $proxySw.checked;
      if ($cfgProxyWrap) $cfgProxyWrap.classList.toggle('hidden', !$proxySw.checked);

      if ($proxySw.checked && proxyList.length === 0) {
          msg.classList.remove('hidden');
      } else {
          msg.classList.add('hidden');
      }
  });
  
  // Add listener for main page proxy select to sync with config
  $proxySelect.addEventListener('change', () => {
      cfg.proxyVal = $proxySelect.value;
      if ($cfgProxySelect) $cfgProxySelect.value = $proxySelect.value;
  });

  // Load Gateways/APIs
  const USER_ROLE = 'free';
  const roleLevel = r => ({free:1,premium:2,admin:3})[r] || 1;
  const canUse = (minRole='free') => roleLevel(USER_ROLE) >= roleLevel(minRole);

  // Config Modal Logic
  let STEP = 1;
  function stepUI(){
    ['step1','step2','step3'].forEach((id,i)=>{
      byId(id).classList.toggle('hidden', STEP !== (i+1));
      byId('s'+(i+1)).classList.toggle('on', STEP === (i+1));
    });
    $cfgBack.classList.toggle('hidden', STEP===1);
    $cfgNext.classList.toggle('hidden', STEP===3);
    $cfgSave.classList.toggle('hidden', STEP!==3);
  }
  function openCfg(){
    STEP = 1; stepUI();
    buildGatewayList(); buildApiList();
    if ($cfgProxySwitch) $cfgProxySwitch.checked = $proxySw.checked;
    $cfgProxyWrap.classList.toggle('hidden', !$cfgProxySwitch.checked);
    if ($cfgProxySelect) $cfgProxySelect.value = ($proxySelect.value || 'random');
    try {
      if ($cfgBlurSwitch) $cfgBlurSwitch.checked = localStorage.getItem(BLUR_KEY) === '1';
      if ($cfgHitSoundSwitch) $cfgHitSoundSwitch.checked = localStorage.getItem(HIT_SOUND_KEY) === '1';
      if ($cfgAutoApiConfig) $cfgAutoApiConfig.value = localStorage.getItem(AUTO_API_CONFIG_KEY) || 'inbuilt';
      if ($cfgHitSender) $cfgHitSender.value = localStorage.getItem(HIT_SENDER_KEY) || 'both';
    } catch (e) {}
    toggleAuxUrlInput();
    $cfgModal.classList.remove('hidden');
    requestAnimationFrame(() => { $cfgSheet.classList.remove('translate-y-4', 'opacity-0'); $cfgSheet.classList.add('translate-y-0', 'opacity-100'); });
  }
  function closeCfg(){ $cfgSheet.classList.add('translate-y-4','opacity-0'); setTimeout(() => $cfgModal.classList.add('hidden'), 180); }
  $cfgResetAllBtn?.addEventListener('click', () => { localStorage.clear(); location.reload(); });
  
  $cfgAutoApiConfig?.addEventListener('change', () => { try { localStorage.setItem(AUTO_API_CONFIG_KEY, $cfgAutoApiConfig.value); } catch {} toggleAuxUrlInput(); });
  $cfgHitSoundSwitch?.addEventListener('change', () => { setHitSound($cfgHitSoundSwitch.checked); });
  $cfgBlurSwitch?.addEventListener('change', () => { setBlur($cfgBlurSwitch.checked); });
  $cfgHitSender?.addEventListener('change', () => { try { localStorage.setItem(HIT_SENDER_KEY, $cfgHitSender.value); } catch {} });

  const GW_ICONS = {amazon:'üõí', stripe:'üí≥', braintree:'üè¶', paypal:'üÖøÔ∏è', payflow:'üÖøÔ∏è', shopify:'üè¨', fastspring:'‚ö°', nmi:'üñß', vbvlookup:'üëÄ'};
    function buildGatewayList(){
      const box = byId('gwList'); box.innerHTML = '';
      if(Object.keys(apiMap).length===0){ box.innerHTML='<div class="text-sm text-slate-400 p-2">Loading gateways...</div>'; return; }
      Object.keys(apiMap).forEach(key=>{
        const g = apiMap[key];
        let iconHtml = 'üóÇÔ∏è';
        if (g.icon) {
            if (g.icon.type === 'icon') {
                iconHtml = `<i class="${g.icon.val} text-xl text-white"></i>`;
            } else if (g.icon.type === 'svg') {
                iconHtml = `<div class="w-5 h-5">${g.icon.val}</div>`;
            } else if (g.icon.type === 'img') {
                iconHtml = `<img src="${g.icon.val}" class="w-6 h-6 object-contain">`;
            }
        } else {
             // Fallback to old map if API doesn't send icon (shouldn't happen with new API)
             iconHtml = GW_ICONS[key] || 'üóÇÔ∏è';
        }

        const li = document.createElement('div');
        li.className = 'fsel-item' + (cfg.gateway===key? ' active':'');
        li.innerHTML = `<div class="fsel-left"><div class="fsel-ico flex items-center justify-center">${iconHtml}</div><div><div class="fsel-title">${g.label}</div><div class="fsel-sub">${g.apis.length} API available</div></div></div><div class="fsel-right"><span class="badge-s">Select</span></div>`;
        li.addEventListener('click',()=>{ cfg.gateway=key; buildGatewayList(); STEP=2; buildApiList(); stepUI(); });
        box.appendChild(li);
      });
    }
  function buildApiList(){
    const wrap = byId('apiList'); wrap.innerHTML = '';
    if(!cfg.gateway){ wrap.innerHTML = '<div class="text-sm text-slate-400">Choose a gateway first.</div>'; return; }
    if(!apiMap[cfg.gateway]) return; // Safety check
    
    apiMap[cfg.gateway].apis.forEach(a=>{
      const allowed = canUse(a.minRole || 'free');
      const li = document.createElement('div');
      li.className = 'fsel-item' + (cfg.api===a.value ? ' active':'');
      li.style.opacity = (allowed && a.alive) ? '1' : '.55';
      li.innerHTML = `<div class="fsel-left"><div class="fsel-ico">üîå</div><div><div class="fsel-title">${a.label}</div><div class="fsel-sub">${a.credits} credit ‚Ä¢ ${allowed ? 'Unlocked' : 'Locked'} ‚Ä¢ <span>${a.value}</span></div></div></div><div class="fsel-right"><span class="badge-s ${a.alive?'badge-ok':'badge-down'}">${a.alive?'Active':'Inactive'}</span></div>`;
      if(allowed && a.alive){ li.addEventListener('click', ()=>{ cfg.api=a.value; buildApiList(); toggleAuxUrlInput(); }); }
      wrap.appendChild(li);
    });
  }
  $cfgNext.addEventListener('click', ()=>{ if(STEP===1 && !cfg.gateway) return toast('Select a gateway first','warning'); if(STEP===2 && !cfg.api) return toast('Select an API','warning'); STEP = Math.min(3, STEP+1); stepUI(); });
  $cfgBack.addEventListener('click', ()=>{ STEP = Math.max(1, STEP-1); stepUI(); });
  $cfgCancel.addEventListener('click', closeCfg);
  $cfgProxySwitch.addEventListener('change', ()=>{ $cfgProxyWrap.classList.toggle('hidden', !$cfgProxySwitch.checked); });
  $cfgSave.addEventListener('click', ()=>{
    if (!cfg.gateway || !cfg.api) { toast('Select gateway & API', 'warning'); return; }
    $gateway.value = cfg.gateway; updateApiOptions(); $api.value = cfg.api;
    const selectedApi = apiMap[cfg.gateway]?.apis.find(a=>a.value===cfg.api);
    if (!selectedApi) { toast('Selected API not found', 'error'); return; }
    setApiPill(selectedApi); toggleAuxInputs(cfg.gateway, cfg.api);
    $statGateway.textContent = selectedApi?.label || 'Select API';
    $proxySw.checked = $cfgProxySwitch.checked;
    $proxySelectContainer.classList.toggle('hidden', !$proxySw.checked);
    $proxySelect.value = $cfgProxySelect.value || 'random';
    setBlur($cfgBlurSwitch.checked); setHitSound($cfgHitSoundSwitch.checked);
    $cfgAutoApiConfig.value = $cfgAutoApiConfig.value || 'inbuilt';
    $cfgHitSender.value = $cfgHitSender.value || 'both';
    toggleAuxUrlInput(); CFG_OK = true; $start.disabled = false;
    closeCfg(); toast('Configuration saved', 'success');
  });
  $openCfgBtn?.addEventListener('click', openCfg);

  // ---------- Aux inputs show/hide ----------
  function toggleAuxInputs(gateway, apiVal) {
    const wooStripeApis = ['autowoostripe1', 'autowoostripe2', 'autowoostripe3', 'autowoostripe4', 'autowoostripe5'];
    $siteLinkInputContainer?.classList.add('hidden'); $skInputContainer?.classList.add('hidden'); $urlInputContainer?.classList.add('hidden'); $cookieInputContainer?.classList.add('hidden'); $stripePackageContainer?.classList.add('hidden'); $paypalKeyInputContainer?.classList.add('hidden'); $amountInputContainer?.classList.add('hidden');
    
    if (gateway === 'stripe' && wooStripeApis.includes(apiVal)) { 
        if ($cfgAutoApiConfig?.value === 'inbuilt') $stripePackageContainer?.classList.remove('hidden'); 
        else $siteLinkInputContainer?.classList.remove('hidden'); 
    }
    else if (gateway === 'stripe' && apiVal === 'skbased') $skInputContainer?.classList.remove('hidden');
    else if (gateway === 'shopify' && apiVal === 'autoshopify') { $urlInputContainer?.classList.remove('hidden'); toggleAuxUrlInput(); }
    else if (gateway === 'amazon' && apiVal === 'amazonauth') $cookieInputContainer?.classList.remove('hidden');
    else if (gateway === 'paypal' && apiVal === 'paypalkeyavs') $paypalKeyInputContainer?.classList.remove('hidden');
    
    // ADDED: Braintree support
    else if (gateway === 'braintree') {
        toggleAuxUrlInput(); 
        $siteLinkInputContainer?.classList.remove('hidden');
    }
    // ADDED: Razorpay support
    else if (gateway === 'razorpay') {
        if ($cfgAutoApiConfig?.value === 'inbuilt') {
             $siteLinkInputContainer?.classList.add('hidden');
             $amountInputContainer?.classList.add('hidden');
        } else {
             $siteLinkInputContainer?.classList.remove('hidden');
             $amountInputContainer?.classList.remove('hidden');
        }
    }
  }
  function toggleAuxUrlInput() {
    const wooStripeApis = ['autowoostripe1', 'autowoostripe2', 'autowoostripe3', 'autowoostripe4', 'autowoostripe5'];
    if ($gateway.value === 'shopify' && $api.value === 'autoshopify' && $cfgAutoApiConfig?.value === 'inbuilt') { $urlInput?.classList.add('hidden'); $urlPackageSelect?.classList.remove('hidden'); } else { $urlInput?.classList.remove('hidden'); $urlPackageSelect?.classList.add('hidden'); }
    if ($gateway.value === 'stripe' && wooStripeApis.includes($api.value)) { if ($cfgAutoApiConfig?.value === 'inbuilt') { $siteLinkInputContainer?.classList.add('hidden'); $stripePackageContainer?.classList.remove('hidden'); } else { $siteLinkInputContainer?.classList.remove('hidden'); $stripePackageContainer?.classList.add('hidden'); } }
    
    // Razorpay Toggle
    if ($gateway.value === 'razorpay') {
        if ($cfgAutoApiConfig?.value === 'inbuilt') {
            $siteLinkInputContainer?.classList.add('hidden');
            $amountInputContainer?.classList.add('hidden');
        } else {
            $siteLinkInputContainer?.classList.remove('hidden');
            $amountInputContainer?.classList.remove('hidden');
        }
    }
  }
  function updateApiOptions() {
    const gateway = $gateway.value; $api.innerHTML = '<option value="">Select API</option>'; $apiLockHint.classList.add('hidden');
    
    // RESTRICT CUSTOM CONFIG: Only for Stripe, Shopify, Braintree
    const autoCfg = byId('cfgAutoApiConfig');
    if (autoCfg) {
        const allowed = ['stripe', 'shopify', 'braintree', 'razorpay'];
        const isAllowed = allowed.includes(gateway);
        // Option 1 is 'Custom' (index 0 is Inbuilt)
        if (autoCfg.options.length > 1) {
            autoCfg.options[1].hidden = !isAllowed;
            autoCfg.options[1].disabled = !isAllowed;
            // Reset to inbuilt if current selection is invalid
            if (!isAllowed && autoCfg.value === 'custom') {
                autoCfg.value = 'inbuilt';
                try { localStorage.setItem(AUTO_API_CONFIG_KEY, 'inbuilt'); } catch {}
            }
        }
    }

    if (apiMap[gateway]) {
      let firstAllowed = ''; let anyLocked = false;
      apiMap[gateway].apis.forEach(api => {
        const allowed = canUse(api.minRole || 'free');
        const option = document.createElement('option'); option.value = api.value;
        const statusDot = api.alive ? 'üü¢' : 'üî¥';
        option.textContent = allowed ? `${statusDot} ${api.label}` : `${statusDot} ${api.label} üîí`;
        option.disabled = !allowed || !api.alive;
        if (!allowed) { anyLocked = true; option.setAttribute('data-locked','1'); }
        $api.appendChild(option);
        if (allowed && api.alive && !firstAllowed) firstAllowed = api.value;
      });
      $api.value = firstAllowed || '';
      if (anyLocked && USER_ROLE==='free') $apiLockHint.classList.remove('hidden');
    }
    const selectedApiVal = $api.value;
    const selectedApi = apiMap[gateway]?.apis.find(a => a.value === selectedApiVal);
    $statGateway.textContent = selectedApi?.label || 'Select API';
    setApiPill(selectedApi); toggleAuxInputs(gateway, selectedApiVal);
  }
  $gateway.addEventListener('change', () => { 
      $api.classList.add('opacity-50','pointer-events-none'); 
      setTimeout(() => { 
          updateApiOptions(); 
          $api.classList.remove('opacity-50','pointer-events-none'); 
          
          // SYNC: Update config object and mark valid
          cfg.gateway = $gateway.value;
          cfg.api = $api.value;
          
          // FIX: Enable start button if valid
          if ($gateway.value && $api.value) {
              CFG_OK = true;
              $start.disabled = false; 
          }
      }, 200); 
  });
  
  $api.addEventListener('change', () => { 
      const gateway = $gateway.value; 
      const apiVal = $api.value; 
      const selectedApi = apiMap[gateway]?.apis.find(a => a.value === apiVal); 
      $statGateway.textContent = selectedApi?.label || 'Select API'; 
      setApiPill(selectedApi); 
      toggleAuxInputs(gateway, apiVal);
      
      // SYNC: Update config object and mark valid
      cfg.gateway = gateway;
      cfg.api = apiVal;
      
      // FIX: Enable start button if valid
      if (gateway && apiVal) {
          CFG_OK = true;
          $start.disabled = false;
      }
  });
  function setApiPill(apiObj){ const pill = byId('apiStatusPill'); if(!pill)return; if(!apiObj){ pill.style.display='none'; return; } pill.style.display = 'inline-flex'; pill.textContent = apiObj.alive ? 'Active' : 'Inactive'; pill.classList.toggle('ok', !!apiObj.alive); pill.classList.toggle('down', !apiObj.alive); }
  // ---------- Tabs ----------
  function switchTab(which) {
    [$tabApproved, $tabLive, $tabDead].forEach(tab => tab.classList.remove('ring-1', 'ring-emerald-400', 'bg-emerald-500/10'));
    [$panelApproved, $panelLive, $panelDead].forEach(panel => panel.classList.add('hidden'));
    if (which === 'approved') { $tabApproved.classList.add('ring-1', 'ring-emerald-400', 'bg-emerald-500/10'); $panelApproved.classList.remove('hidden'); }
    else if (which === 'live') { $tabLive.classList.add('ring-1', 'ring-emerald-400', 'bg-emerald-500/10'); $panelLive.classList.remove('hidden'); }
    else { $tabDead.classList.add('ring-1', 'ring-emerald-400', 'bg-emerald-500/10'); $panelDead.classList.remove('hidden'); }
  }
  $tabApproved.addEventListener('click', () => switchTab('approved'));
  $tabLive.addEventListener('click', () => switchTab('live'));
  $tabDead.addEventListener('click', () => switchTab('dead'));

  // ---------- File import ----------
  $file.addEventListener('change', function() { const f = this.files && this.files[0]; if (!f) return; const fr = new FileReader(); fr.onload = () => { $txt.value = String(fr.result).replace(/\r/g, '').trim(); toast('Cards imported successfully', 'success'); this.value = ''; }; fr.readAsText(f); });
  $clear.addEventListener('click', () => { $txt.value = ''; $boxApproved.innerHTML = ''; $boxLive.innerHTML = ''; $boxDead.innerHTML = ''; $statTotal.textContent = '0'; $statApproved.textContent = '0'; $statLive.textContent = '0'; $statDead.textContent = '0'; $statYet.textContent = '0'; $skInput.value = ''; $urlInput.value = ''; $cookieInput.value = ''; $siteLinkInput.value = ''; $urlPackageSelect.value = 'free'; toast('Cleared all data', 'info'); });

  // ---------- Validators ----------
  function validateLine(l) { const p = l.split('|'); return p.length === 4 && /^[0-9]{13,19}$/.test(p[0]) && /^[0-9]{1,2}$/.test(p[1]) && /^[0-9]{2,4}$/.test(p[2]) && /^[0-9]{3,4}$/.test(p[3]); }
  function validateUrl(url) { 
      // Allow simple domains like example.com as well as full URLs
      return /^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(\/.*)?$/.test(url.trim()); 
  }
  function classify(resp) {
    if (resp && typeof resp === 'object' && resp.status) { const status = resp.status.toLowerCase(); if (status === 'charge' || status === 'approved') return 'APPROVED'; if (status === 'live') return 'LIVE'; }
    const t = String(resp || '').toUpperCase();
    if (t.includes('YOUR PAYMENT SUCCESSFUL') || t.includes('CHARGE') || t.includes('APPROVED')) return 'APPROVED';
    if (t.includes('LIVE') || t.includes('CVV2_FAILURE') || t.includes('INSUFFICIENT_FUNDS') || t.includes('CARD ISSUER DECLINED CVV')) return 'LIVE';
    return 'DEAD';
  }
  const gatewayLabel = (gateway, api) => (apiMap[gateway]?.apis.find(a => a.value === api)?.label || 'Unknown');

  // ---------- Concurrency ----------
  let running = false, aborter;
  async function worker(queue, ctx) {
    while (running && !aborter?.signal.aborted) {
      const next = queue.shift(); if (!next) break;
      try { await ctx.runOne(next); } catch (e) { if (e.name === 'AbortError') break; console.error('Worker error:', e); }
    }
  }
  async function startRun() {
    if (running) { toast('Already running', 'warning'); return; }
    // Allow run if dropdowns have values, even if config modal wasn't used
    if (!CFG_OK && (!$gateway.value || !$api.value)) { toast('Please configure first', 'warning'); openCfg(); return; }
    const gateway = $gateway.value; const api = $api.value;
    if (!gateway || !api) { toast('Please select both a gateway and an API', 'warning'); return; }
    const selectedApi = apiMap[gateway]?.apis.find(a => a.value === api);
    if (!selectedApi) { toast('Selected API not found', 'error'); return; }
    if (!canUse(selectedApi.minRole || 'free')) { toast('This API is locked for your plan. Upgrade to use üîí', 'error'); return; }
    if ($proxySw.checked && proxyList.length === 0) { toast('No proxies loaded. Please check API.', 'warning'); }
    const have = parseInt($statCred.textContent || '0', 10) || 0;
    if (have < selectedApi.credits) { toast(`Insufficient Credits (${have}/${selectedApi.credits})`, 'error'); return; }
    let lines = ($txt.value || '').replace(/\r/g,'').split(/\n+/).map(s=>s.trim()).filter(Boolean);
    lines = lines.filter(validateLine);
    if (!lines.length) { toast('No valid cards', 'warning'); return; }
    const maxChecks = 100;
    if (lines.length > maxChecks) { toast(`Max ${maxChecks} checks for your plan`, 'warning'); return; }
    
    // Aux validation
    let urls = [], urlPackage = '', cookies = [], siteLink = '', sitePackage = '';
    if (gateway === 'shopify' && api === 'autoshopify') {
      if ($cfgAutoApiConfig.value === 'inbuilt') urlPackage = $urlPackageSelect.value || 'free';
      else { urls = ($urlInput.value || '').replace(/\r/g,'').split(/\n+/).map(s=>s.trim()).filter(Boolean).filter(validateUrl); if (!urls.length) { toast('Valid URL required', 'warning'); return; } }
    }
    if (gateway === 'amazon' && api === 'amazonauth') { cookies = ($cookieInput.value || '').replace(/\r/g,'').split(/\n+/).map(s=>s.trim()).filter(Boolean); if (!cookies.length) { toast('Cookie required', 'warning'); return; } }
    if (gateway === 'stripe' && ['autowoostripe1','autowoostripe2','autowoostripe3'].includes(api)) {
      if ($cfgAutoApiConfig.value === 'inbuilt') sitePackage = $stripePackageSelect.value || 'free';
      else { siteLink = ($siteLinkInput.value || '').trim(); if (!validateUrl(siteLink)) { toast('Site Link required', 'warning'); return; } }
    }

    initProgress(lines.length); speed.reset(); running = true; aborter = new AbortController();
    $start.disabled = true; $stop.disabled = false; $start.innerHTML = 'Checking... <i class="fas fa-spinner fa-spin"></i>';
    $boxApproved.innerHTML = ''; $boxLive.innerHTML = ''; $boxDead.innerHTML = '';
    $statTotal.textContent = String(lines.length); $statYet.textContent = String(lines.length);
    $statApproved.textContent = '0'; $statLive.textContent = '0'; $statDead.textContent = '0';
    $statGateway.textContent = gatewayLabel(gateway, api);
    let credits = parseInt($statCred.textContent || '0', 10) || 0;
    const useProxy = $proxySw.checked ? '1' : '0';
    const hitSound = $cfgHitSoundSwitch.checked;
    const hitSender = $cfgHitSender.value;
    const skKey = ($skInput.value || '').trim();

    async function runSingle(line){
      try{
        const qs = new URLSearchParams({ cc: line, useProxy, hitSender });
        if (skKey && gateway==='stripe' && api==='skbased') qs.append('sk', skKey);
        if (gateway==='shopify' && api==='autoshopify'){ if ($cfgAutoApiConfig.value === 'inbuilt') qs.append('urlPackage', urlPackage); else qs.append('url', urls[Math.floor(Math.random()*urls.length)]); }
        if (gateway==='amazon' && api==='amazonauth') qs.append('cck', btoa(cookies[Math.floor(Math.random()*cookies.length)]));
        if (gateway === 'stripe' && ['autowoostripe1','autowoostripe2','autowoostripe3'].includes(api)) { if ($cfgAutoApiConfig.value === 'inbuilt') qs.append('sitePackage', sitePackage); else qs.append('siteLink', siteLink); }
        if (gateway === 'paypal' && api === 'paypalkeyavs') { const cid = $paypalClientId?.value.trim(); const sec = $paypalClientSecret?.value.trim(); if (cid) qs.append('client_id', cid); if (sec) qs.append('client_secret', sec); }
        
        // Custom fields for Razorpay/Braintree
        if (gateway === 'razorpay') {
            qs.append('amount', $amountInput?.value.trim() || '100');
            qs.append('site', $siteLinkInput?.value.trim() || '');
        }
        if (gateway === 'braintree') {
            qs.append('site', $siteLinkInput?.value.trim() || '');
        }
        
        // Proxy logic
        if (useProxy === '1') {
          let pHost='', pPort='', pUser='', pPass='';
          if ($proxySelect.value === 'random' && proxyList.length > 0) { const rnd = proxyList[Math.floor(Math.random()*proxyList.length)]; pHost=rnd.host; pPort=rnd.port; pUser=rnd.username; pPass=rnd.password; }
          else if ($proxySelect.value !== 'random') { try{ const sel = JSON.parse($proxySelect.value); pHost=sel.host; pPort=sel.port; pUser=sel.username; pPass=sel.password; }catch{} }
          if(pHost) { qs.append('host', pHost); qs.append('port', pPort); qs.append('user', pUser); qs.append('pass', pPass); }
        }

        // BIN Lookup
        const bin = line.substring(0,6);
        fetch('../api/bin_lookup.php?bin=' + bin).catch(()=>{});

        let ep = selectedApi.endpoint;
        // Robust path fix - Absolute path to avoid relative path issues
        if (api === 'autowoostripe1') ep = '/api/stripe/autowoostripe1.php';
        else if (api === 'autowoostripe2') ep = '/api/stripe/autowoostripe2.php';
        else if (!ep.startsWith('http') && !ep.startsWith('../') && !ep.startsWith('/')) ep = '../' + ep;
        
        const url = `${ep}?${qs.toString()}`;
        const t0 = performance.now();
        const res = await fetch(url, { method:'GET', cache:'no-store', signal:aborter.signal, keepalive:true });
        const t1 = performance.now();
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        const respText = (data && (data.Response ?? data.response)) ?? 'Unknown';
        const gate = (data && (data.Gateway ?? data.gateway)) ?? gatewayLabel(gateway, api);
        addSample(gate, (t1 - t0));
        const cat = classify(data);
        const block = `<div class="${cat==='APPROVED'?'line-ok':(cat==='LIVE'?'line-live':'line-dead')}">#${esc(gate).replace(/\s+/g,'')}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n[‚ùÉ] Card ‚ûú <span class="cc-mask">${esc(line)}</span>\n[‚ùÉ] Status ‚ûú ${cat==='APPROVED'?'Approved ‚úÖ':(cat==='LIVE'?'Live ‚úÖ':'Dead ‚ùå')}\n[‚ùÉ] Response ‚ûú ${esc(respText)}\n[‚ùÉ] Gateway ‚ûú ${esc(gate)}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n${(data.brand && data.bank) ? `[‚ùÉ] Info ‚ûú ${esc(data.brand)} - ${esc(data.type)} - ${esc(data.level)}\n[‚ùÉ] Bank ‚ûú ${esc(data.bank)}\n[‚ùÉ] Country ‚ûú ${esc(data.country_name)} ${esc(data.country_flag)}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n` : ''}[‚ùÉ] Time ‚ûú ${((t1 - t0)/1000).toFixed(2)}s\n</div>\n`;
        
        if (cat === 'APPROVED') { $boxApproved.innerHTML += block + '\n'; $statApproved.textContent = String(+$statApproved.textContent + 1); if (hitSound) byId('approvedSound')?.play?.(); hitToast(respText, 'success'); }
        else if (cat === 'LIVE') { $boxLive.innerHTML += block + '\n'; $statLive.textContent = String(+$statLive.textContent + 1); if (hitSound) byId('liveSound')?.play?.(); hitToast(respText, 'info'); }
        else { $boxDead.innerHTML += block + '\n'; $statDead.textContent = String(+$statDead.textContent + 1); }
        
        if (typeof data?.credits === 'number') credits = data.credits;
        else if (cat === 'APPROVED') credits = Math.max(0, credits - selectedApi.credits);
        else if (cat === 'LIVE') credits = Math.max(0, credits - Math.min(selectedApi.credits, 1));
        $statCred.textContent = String(credits);

      } catch(e) {
        if (e.name === 'AbortError') throw e;
        $boxDead.innerHTML += `<div class="line-dead">#${esc(gatewayLabel(gateway, api))}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n[‚ùÉ] Card ‚ûú <span class="cc-mask">${esc(line)}</span>\n[‚ùÉ] Status ‚ûú Dead ‚ùå\n[‚ùÉ] Response ‚ûú ${esc(e.message)}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n</div>\n`;
        $statDead.textContent = String(+$statDead.textContent + 1);
      } finally {
        const arr = ($txt.value || '').split(/\n+/).map(s=>s.trim()).filter(Boolean);
        const idx = arr.indexOf(line);
        if (idx > -1) { arr.splice(idx,1); $txt.value = arr.join('\n'); }
        $statYet.textContent = String(Math.max(0, +$statYet.textContent - 1));
        tickProgress();
      }
    }
    const queue = [...lines];
    await worker(queue, { runOne: runSingle });
    if (running) { running = false; $start.disabled = false; $start.innerHTML = '<i class="fas fa-play mr-1"></i> Start Checking'; $stop.disabled = true; toast('Checking completed', 'success'); }
  }
  $start.addEventListener('click', startRun);
  $stop.addEventListener('click', () => { if (running) { running = false; aborter?.abort(); aborter=null; $start.disabled = false; $start.innerHTML = '<i class="fas fa-play mr-1"></i> Start Checking'; $stop.disabled = true; toast('Checking stopped', 'warning'); } });

  // BIN Lookup
  const $binLookupInput = byId('binLookupInput');
  const $btnBinLookup = byId('btnBinLookup');
  const $binLookupResult = byId('binLookupResult');
  
  $btnBinLookup?.addEventListener('click', async () => {
    const bin = $binLookupInput.value.trim();
    if (!bin || bin.length < 6) {
      toast('Enter a valid 6-digit BIN', 'warning');
      return;
    }
    
    try {
      $btnBinLookup.disabled = true;
      $btnBinLookup.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-1"></i> Looking up...';
      
      const res = await fetch(`../api/bin_lookup.php?bin=${bin}`);
      const data = await res.json();
      
      if (data.ok && data.data) {
        byId('binBrand').textContent = data.data.brand || 'UNKNOWN';
        byId('binType').textContent = data.data.type || 'UNKNOWN';
        byId('binLevel').textContent = data.data.category || 'STANDARD';
        byId('binBank').textContent = data.data.issuer || 'UNKNOWN';
        byId('binCountry').textContent = `${data.data.country || 'UNKNOWN'} (${data.data.code || 'UN'})`;
        $binLookupResult.classList.remove('hidden');
        toast('BIN lookup successful', 'success');
      } else {
        toast(data.error || 'BIN not found', 'error');
        $binLookupResult.classList.add('hidden');
      }
    } catch (e) {
      toast('Lookup failed: ' + e.message, 'error');
    } finally {
      $btnBinLookup.disabled = false;
      $btnBinLookup.innerHTML = '<i class="fa-solid fa-search mr-1"></i> Lookup BIN';
    }
  });

  // BIN CHK (Multiple BINs)
  const $binChkInput = byId('binChkInput');
  const $btnBinChk = byId('btnBinChk');
  const $binChkResult = byId('binChkResult');
  const $binChkResultList = byId('binChkResultList');
  
  $btnBinChk?.addEventListener('click', async () => {
    const bins = $binChkInput.value.split('\n').map(b => b.trim()).filter(b => b.length >= 6);
    if (!bins.length) {
      toast('Enter at least one valid BIN', 'warning');
      return;
    }
    
    try {
      $btnBinChk.disabled = true;
      $btnBinChk.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-1"></i> Checking...';
      $binChkResultList.innerHTML = '';
      $binChkResult.classList.remove('hidden');
      
      for (const bin of bins) {
        const res = await fetch(`../api/bin_lookup.php?bin=${bin}`);
        const data = await res.json();
        
        if (data.ok && data.data) {
          const resultBlock = document.createElement('div');
          resultBlock.className = 'bg-slate-800/50 rounded-lg p-3 border border-emerald-500/20';
          resultBlock.innerHTML = `
            <div class="font-bold text-emerald-400 mb-2">BIN: ${bin}</div>
            <div class="space-y-1">
              <div class="flex justify-between"><span class="text-slate-400">Brand:</span><span class="font-semibold">${data.data.brand}</span></div>
              <div class="flex justify-between"><span class="text-slate-400">Type:</span><span class="font-semibold">${data.data.type}</span></div>
              <div class="flex justify-between"><span class="text-slate-400">Level:</span><span class="font-semibold">${data.data.category}</span></div>
              <div class="flex justify-between"><span class="text-slate-400">Bank:</span><span class="font-semibold">${data.data.issuer}</span></div>
              <div class="flex justify-between"><span class="text-slate-400">Country:</span><span class="font-semibold">${data.data.country} (${data.data.code})</span></div>
            </div>
          `;
          $binChkResultList.appendChild(resultBlock);
        } else {
          const errorBlock = document.createElement('div');
          errorBlock.className = 'bg-slate-800/50 rounded-lg p-3 border border-rose-500/20';
          errorBlock.innerHTML = `<div class="font-bold text-rose-400">BIN: ${bin} - Not Found</div>`;
          $binChkResultList.appendChild(errorBlock);
        }
      }
      
      toast('BIN check completed', 'success');
    } catch (e) {
      toast('Check failed: ' + e.message, 'error');
    } finally {
      $btnBinChk.disabled = false;
      $btnBinChk.innerHTML = '<i class="fa-solid fa-list-check mr-1"></i> Check All BINs';
    }
  });
  // CC Generator with Luhn Algorithm
  function generateCard(bin) {
    if (!bin) return '';
    
    // Replace 'x' with random digits
    let bin2 = "";
    for (let i in bin) {
      let char = bin[i].toLowerCase();
      if (char == "x") char = Math.floor(Math.random() * 10);
      bin2 += char;
    }
    
    // Generate random digits until we have 15 digits (16th will be check digit)
    let card = bin2;
    while (card.length < 15) {
      card += Math.floor(Math.random() * 10);
    }
    
    // Calculate Luhn check digit
    let sum = 0;
    let alt = false;
    
    // Iterate from right to left
    for (let i = card.length - 1; i >= 0; i--) {
      let num = parseInt(card.charAt(i), 10);
      
      if (alt) {
        num *= 2;
        if (num > 9) {
          num -= 9; // Same as (num % 10) + 1
        }
      }
      
      sum += num;
      alt = !alt;
    }
    
    // Calculate check digit
    const checkDigit = (10 - (sum % 10)) % 10;
    card += checkDigit;
    
    return card;
  }
  
  $btnGen.addEventListener('click', () => {
    const bin = $genbin.value.trim();
    const qty = parseInt($genqty.value.trim(), 10) || 10;
    
    if (!bin) {
      toast('Enter BIN', 'warning');
      return;
    }
    
    let cards = [];
    for (let i = 0; i < Math.min(qty, 1000); i++) {
      const c = generateCard(bin);
      const m = $month.value === 'Random' ? ('0' + (Math.floor(Math.random() * 12) + 1)).slice(-2) : $month.value;
      const y = $year.value === 'Random' ? (Math.floor(Math.random() * 8) + 2025) : $year.value;
      const cv = $gencvv.value.trim() || (Math.floor(Math.random() * 900) + 100);
      cards.push(`${c}|${m}|${y}|${cv}`);
    }
    
    $txt.value = ($txt.value ? $txt.value + '\n' : '') + cards.join('\n');
    toast('Cards generated', 'success');
  });

  // Init
  loadProxies();
  setInterval(() => { fetch('../api/heartbeat.php').catch(()=>{}); }, 30000);
  const tickClock = () => { const el=byId("liveClock"); if(el) el.textContent=new Date().toLocaleTimeString(); };
  tickClock(); setInterval(tickClock, 1000);
  
  // Mobile menu
  const mSide = byId("mSide"); const mOverlay = byId("mOverlay");
  byId("dockMenu")?.addEventListener('click', () => { mSide.classList.toggle('open'); mOverlay.classList.toggle('hidden'); mOverlay.classList.toggle('show'); });
  mOverlay?.addEventListener('click', () => { mSide.classList.remove('open'); mOverlay.classList.remove('show'); setTimeout(()=>mOverlay.classList.add('hidden'), 180); });

  // Credits Modal
  const cModal = byId('creditsModal'); const cCard = byId('creditsCard');
  if (!localStorage.getItem('cx_ack_credits_v1')) { cModal.classList.remove('hidden'); requestAnimationFrame(() => { cCard.classList.remove('translate-y-4', 'opacity-0'); cCard.classList.add('translate-y-0', 'opacity-100'); }); }
  byId('ackBtn')?.addEventListener('click', () => { localStorage.setItem('cx_ack_credits_v1', Date.now()); cCard.classList.add('translate-y-4', 'opacity-0'); setTimeout(() => cModal.classList.add('hidden'), 180); });

  // Tools Modal
  const tModal = byId('toolsModal'); const tSheet = byId('toolsSheet');
  byId('openToolsBtn')?.addEventListener('click', () => { tModal.classList.remove('hidden'); requestAnimationFrame(() => { tSheet.classList.remove('translate-y-4', 'opacity-0'); tSheet.classList.add('translate-y-0', 'opacity-100'); }); });
  byId('toolsClose')?.addEventListener('click', () => { tSheet.classList.add('translate-y-4', 'opacity-0'); setTimeout(() => tModal.classList.add('hidden'), 180); });

  // Copy
  byId('copyApproved')?.addEventListener('click', () => { navigator.clipboard.writeText($boxApproved.innerText).then(() => toast('Copied', 'success')); });
  byId('copyLive')?.addEventListener('click', () => { navigator.clipboard.writeText($boxLive.innerText).then(() => toast('Copied', 'success')); });
  byId('clearDead')?.addEventListener('click', () => { $boxDead.innerHTML = ''; toast('Cleared', 'info'); });

})();
</script>

<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"c42501fbe2ea42eabd1b5bda745f5bd2","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>
